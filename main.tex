\documentclass[sigplan,10pt,anonymous,review,nonacm]{acmart}
% \settopmatter{printfolios=true,printccs=false,printacmref=false}
\usepackage[utf8]{inputenc}
\usepackage{subcaption}
\usepackage{listings}
\usepackage{multicol}
\usepackage[cache=false]{minted}
\usepackage{listings}
\usepackage{xcolor}
\usepackage[nounderscore]{syntax}
\usepackage{graphicx}
\usepackage{newunicodechar}
\newunicodechar{ə}{\pmschwa}
\DeclareRobustCommand{\pmschwa}{\rotatebox[origin=c]{180}{e}}

\setminted{fontsize=\footnotesize}

% Colors
\definecolor{darkgray}{HTML}{404040}
\definecolor{rulegray}{HTML}{DADADA}
\definecolor{keywordblue}{HTML}{1F497C}
\definecolor{mygray}{gray}{0.6}
% Listings
\lstdefinestyle{code}{
  basicstyle=\scriptsize,
  %backgroundcolor=\color{rulegray},
   numbers=left,
  emph=[1]{BEGIN, END, INPUT},
  emphstyle=[1]{\color{black}},
  keywordstyle=\color{keywordblue},
  keywords={LET, IN,CASE,IF,ELSE,THEN, WITH},
  escapeinside={(*@}{@*)}
}
% Listings
%\lstdefinestyle{code}{
  %basicstyle=\scriptsize,
  %keywordstyle=\color{keywordblue},
  %keywords={import,qualified,as,do,where}
%}


\newcommand{\mynote}[3]
    {{\color{#3} \fbox{\bfseries\sffamily\scriptsize#1}
    {\small$\blacktriangleright$\textsf{\emph{#2}}$\blacktriangleleft$}}~}
\newcommand{\et}[1]{\mynote{ET}{#1}{purple}}
\newcommand{\fo}[1]{\mynote{FO}{#1}{red}}
\newcommand{\td}[1]{\mynote{TD}{#1}{blue}}

\newcommand\mdoubleplus{\mathbin{+\mkern-5mu+}}

\newcommand{\coql}{\textit{GraphCoQL}}
\newcommand{\spec}{\textit{Spec}}
\newcommand{\HP}{\textit{HP}}
\newcommand{\Vals}{$\mathit{Vals}$}

% semantics
\newcommand{\eval}[2]{\llbracket #1 \rrbracket^{#2}_{G}}
\newcommand{\evalu}[1]{\eval{#1}{u}}
\newcommand{\evalfilteru}[2]{\eval{\mathit{filter}_{#2}(#1)}{u}}
% simpl semantics
\newcommand{\seval}[2]{\ll #1 \gg^{#2}_{G}}
\newcommand{\sevalu}[1]{\seval{#1}{u}}

\newcommand{\queries}{\overline{\varphi}}
\newcommand{\subqueries}[1]{\overline{#1}}
\newcommand{\fkey}{\texttt{f}}
\newcommand{\fld}{\texttt{f[}\alpha\texttt{]}}
\newcommand{\nfld}[1]{\fld \texttt{\{}#1\texttt{\}} }
\newcommand{\ifrag}[2]{\texttt{... on #1}\texttt{\{}#2\texttt{\}}}
\newcommand{\resp}[1]{\fkey\texttt{:}#1}
\newcommand{\nval}{\texttt{null}}
\newcommand{\val}{\texttt{v}}


\begin{document}

\title{A Mechanized Formalization of GraphQL}
\author{Tomás Díaz}
\affiliation{%
  \institution{IMFD Chile}
  \city{Santiago}
  \country{Chile}
}

\author{Federico Olmedo}
\affiliation{%<
  \institution{University of Chile \& IMFD Chile}
  \department{Computer Science Department (DCC)}
  \city{Santiago}
  \country{Chile}
}
\author{Éric Tanter}
\affiliation{%
  \institution{University of Chile \& IMFD Chile}
  \department{Computer Science Department (DCC)}
  \city{Santiago}
  \country{Chile}
}

\begin{abstract}
GraphQL is a novel language for specifying and querying web APIs, allowing clients to flexibility and efficiently retrieve data of interest. The GraphQL language specification is unfortunately only available in prose, making it hard to develop robust formal results for this language. Recently, Hartig and Pérez proposed a formal semantics for GraphQL in order to study the complexity of GraphQL queries. These semantics are however not mechanized and leave certain key aspects unverified. We present GraphCoQL, the first mechanized formalization of GraphQL, developed in the Coq proof assistant.  GraphCoQL covers the schema definition DSL, query definitions, validation of both schema and queries, as well as the semantics of queries over a graph data model.
We illustrate the application of GraphCoQL by formalizing the key query transformation and interpretation techniques of Hartig and Pérez, and proving them correct \et{modulo some bugs/imprecisions?}. 
We hope that GraphCoQL can serve as a solid formal baseline for both language design and verification efforts for GraphQL.
\end{abstract}


\maketitle


\et{future work/somewhere: relate to the current reference implementation as we did for CoqR}

\et{future work: extraction for real}

\et{global search/replace for Tomas: change "Section~\ref{X}" to "\S\ref{X}" (try to keep them aside from the text -- see "contributions" below for examples)}

\input{introduction.tex}
\input{background.tex}
\input{formalization.tex}
\input{normalization.tex}
\input{discussion.tex}

\section{Validation}\label{sec:valid}
LOC, files, man-month, major effort

Examples - Jorge's, Spec,

Most of the development time was spent in the definition and proofs of normalization.
We initially worked on the semantics as specified by \cite{gqlph}

\input{related.tex}
\input{future.tex}
\input{conclusions.tex}

\bibliographystyle{acm}
\bibliography{biblio}
\end{document}
